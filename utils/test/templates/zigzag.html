<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ZigZag Live Chart</title>
    <script src="https://unpkg.com/lightweight-charts@4.0.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
<div id="chart" style="width:100%; height:600px;"></div>

<script>
const chart = LightweightCharts.createChart(document.getElementById('chart'), {
    width: window.innerWidth,
    height: 600
});

const candleSeries = chart.addCandlestickSeries();
const zigzagSeries = chart.addLineSeries({
    color: 'red',
    lineWidth: 2
});

function fetchData() {
    fetch('/data')
        .then(res => res.json())
        .then(data => {
            candleSeries.setData(data.candles);
            zigzagSeries.setData(data.zigzag);
        });
}

// Press space to load next candle
document.addEventListener('keydown', function(event) {
    if (event.code === 'Space') {
        fetchData();
    }
});
</script>
</body>
</html>
